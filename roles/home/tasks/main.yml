---

- name: installing packages
  apt: name={{ item }} state=present update_cache=yes
  with_items:
    - vim
    - zsh
    - roxterm
    - sshfs
    - unzip
    - xinit
    - consolekit
    - openbox
    - tint2
    - firefox
    - gmrun
    - geeqie
    - numlockx
    - kbdd
    - xscreensaver
    - keepassx
    - htop
    - ncmpcpp
    - alsa-base
    - alsa-utils
  become: yes

- name: install grml zsh
  get_url:
    url: https://git.grml.org/f/grml-etc-core/etc/zsh/zshrc
    dest: "/home/{{ ansible_env.SUDO_USER }}/.zshrc"
    owner: "{{ ansible_env.SUDO_USER }}"
    force: yes

- name: configuring grml
  lineinfile:
    dest: "/home/{{ ansible_env.SUDO_USER }}/.zshrc"
    line: '\1format "${MAGENTA}(${NO_COLOR}%s${MAGENTA})${YELLOW}-${MAGENTA}[${GREEN}%b${MAGENTA}${MAGENTA}]${RED}%c${GREEN}%u${NO_COLOR} "'
    regexp: '(\s+)format \"\$\{MAGENTA\}.*'
    backrefs: yes

- name: synchronize configs
  synchronize:
    src: home/
    dest: "/home/{{ ansible_env.SUDO_USER }}/"
    archive: yes

- name: templating autostart
  template:
    src: home/.config/openbox/autostart.j2
    dest: "/home/{{ ansible_env.SUDO_USER }}/.config/openbox/autostart"

- name: templating tmux
  template:
    src: home/.tmux.conf.j2
    dest: "/home/{{ ansible_env.SUDO_USER }}/.tmux.conf"

- name: init vim plugins
  shell: >
    vim +PlugInstall +qall

# vi:syntax=yaml
